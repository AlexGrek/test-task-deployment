# Why do I choose k8s for the task?

## Переваги

Instrastructure as code - можливість задати конфігурацію системи у вигляді коду без ручних операцій взагалі.
Це дозволяє розгортати систему будь-де в найкоротший час, незалежно від віртуальних чи фізичних машин.

Easy declarative modifications - можливість перерозподіляти навантаження, додавати, змінювати чи прибирати ноди
шляхом зміни конфігурації, що зберігається у репозиторії.

Future proof - додати більше ресурсів при зростанні навантаження дуже просто, так як система вже розподілена
і має все, від shared storage до load balancer.

Сучасність - це зараз сучасна та домінуюча технологія, яка залишиться з нами надовго. Це сучасний стандарт
індустрії.

k8s бере на себе дуже багато роботи, від створення внутрішньої мережі кластеру до керування секретами.

Helm дозволяє контролювати розгортання за допомогою версій (з можливістю відкату) та змін, що фіксуються
у репозиторії.

Безпека - можливість налаштувати різний рівень доступу для різних користувачів, що (майже) неможливо зробити 
з прямим ssh доступом до продакшн нод.

Можливість переїзду у інші дата-центри та на будь-які хмарні сервіси з мінімальними змінами конфігурації.

Відсутність зоопарку кастомних рішень, який робить "знаючих" співробітників незамінними. Kubernetes - стандарт.

Моніторинг - з коробки (з мінімальними налаштуваннями).

Kubernetes CronJob - значно краще за звичайний крон, так як цим зручно керувати та відстежувати роботу.
Також це сучасний стандарт для бекапу.

## Чому я обираю k3s як дистрибутив кубера:

Повна комплектація, готова як для dev-оточення, так і для production, прямо з коробки.

Не треба окрема нода у ролі master - він створює single-node кластер за замовчуванням, але це можна налаштувати,
якщо буде потрібно high availability.

Вбудований ingress - Traefik, він сучасний та простий, дуже швидкий, але може бути замінений на що завгодно - хоч nginx чи istio.

Він вміє сам керувати let's encrypt ssl сертифікатами, що спрощує налаштування. Також є load balancer, якщо потрібно.

Простий в налаштуванні.

## Як це підходить для деплоя Вашого додатку

1. Розгортання k3s-агентів на віртуальних машинах просте, швидке, автоматизовується через ansible та майже не має
оверхеду по використанню ресурсів.

2. Створена віртуальна мережа автоматично бере на себе роутинг між різними сервісами і базами даних незалежно від
того, на яких фізичних/віртуальних машинах які контейнери запущені.

3. Розподілення навантаження можна довірити куберу, але краще розмітити, які ноди підходять для яких сервісів, тоді
kube-scheduler розподілить їх так, як ми хочемо. Це також декларативна конфігурація і можна змінювати це у коді.

4. Helm-чарт зберігається в репозиторії разом з додатком (або окремо) для контролю версій.

5. Просто інтегрується з будь-якими деплой пайплайнами, з секретами, docker registry, ...
